# LED Setup
LED PINK

# Download Bot.py von der definierten Adresse herunterladen
:DOWNLOAD
SET COUNT 0
:DOWNLOAD_TRY
GET https://definierte-adresse.com/Bot.py /tmp/Bot.py
IF SUCCESS
  GOTO DOWNLOAD_SUCCESS
ENDIF

# Download fehlgeschlagen
SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED PINK
SLEEP 500
LED OFF

SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED PINK
SLEEP 500
LED OFF

SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED PINK
SLEEP 500
LED OFF

SET COUNT ADD 1
IF COUNT IS 3
  GOTO ERROR
ELSE
  GOTO DOWNLOAD_TRY
ENDIF

:DOWNLOAD_SUCCESS
SET / SYSTEM/LED GREEN
LED OFF
SLEEP 500
LED PINK
SLEEP 500
LED OFF

# Bot.py auf den Router hochladen und ausf端hren
LED YELLOW

:UPLOAD
SET COUNT 0
:UPLOAD_TRY
UPLOAD /tmp/Bot.py /root/Bot.py
IF SUCCESS
  GOTO UPLOAD_SUCCESS
ENDIF

# Upload fehlgeschlagen
SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED YELLOW
SLEEP 500
LED OFF

SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED YELLOW
SLEEP 500
LED OFF

SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED YELLOW
SLEEP 500
LED OFF

SET COUNT ADD 1
IF COUNT IS 3
  GOTO ERROR
ELSE
  GOTO UPLOAD_TRY
ENDIF

:UPLOAD_SUCCESS
SET / SYSTEM/LED GREEN
LED OFF
SLEEP 500
LED YELLOW
SLEEP 500
LED OFF

# Bot.py ausf端hren
LED BLUE

:RUN_BOT
SET COUNT 0
:RUN_BOT_TRY
SSH root@192.168.1.1 'python /root/Bot.py'
IF SUCCESS
  GOTO RUN_BOT_SUCCESS
ENDIF

# Ausf端hrung fehlgeschlagen
SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED BLUE
SLEEP 500
LED OFF

SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED BLUE
SLEEP 500
LED OFF

SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED BLUE
SLEEP 500
LED OFF

SET COUNT ADD 1
IF COUNT IS 3
  GOTO ERROR
ELSE
  GOTO RUN_BOT_TRY
ENDIF

:RUN_BOT_SUCCESS
SET / SYSTEM/LED GREEN
LED OFF
SLEEP 500
LED BLUE
SLEEP 500
LED OFF

# Script beendet erfolgreich, LED Gr端n blinken lassen bis SharkJack ausgeschaltet wird
LED BLINK_GREEN

:ERROR
SET / SYSTEM/LED RED
LED OFF
SLEEP 500
LED BLINK_RED
SLEEP 500
LED OFF

